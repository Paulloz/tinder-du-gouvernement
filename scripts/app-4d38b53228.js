/******/!function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var s=n(1),i=n(2),o=n(3),r=n(4);angular.module("tinderDuGouvernement",["ngTouch","ngSanitize"]).config(s.config).run(i.runBlock).directive("card",r.CardDirective).controller("MainController",o.MainController)},function(e,t){"use strict";function n(e){"ngInject";e.debugEnabled(!0)}n.$inject=["$logProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=n},function(e,t){"use strict";function n(e){"ngInject"}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(t,s,i,o){"ngInject";var r=this;n(this,e),this.$timeout=o,this.$scope=s,this.$scope.score=0,this.done=-1,this.$scope.deckSize=15,this.$scope.itsamatch=null,this.$scope.ending=[],this.congratulations=["Bravo !","Bien joué !","En effet !","Bien vu !","T'es un-e as !"],i.get("assets/tsv/all.tsv").then(function(e){for(e.data=d3_dsv.tsvParse(e.data,function(e){return new Object({ID:+e.ID,surname:e["Prénom"],name:e.Nom,isAWoman:"F"===e["H/F"],party:e.Parti.length>0?e.Parti:void 0,wikipedia:e.Wikipedia,isPartOf:1===+e.Gouvernement,title:e.Poste})}),r.gvt=e.data,r.deck=[];r.deck.length<r.$scope.deckSize;){var t=_.sample(r.gvt);(t.isPartOf||r.deck.length>=r.$scope.deckSize/3)&&(r.deck.push(t),_.remove(r.gvt,t))}r.gvt=e.data,r.$scope.persons=r.deck}),this.$scope.isItAMatch=this.isItAMatch.bind(this),this.$scope.isItAOKMatch=this.isItAOKMatch.bind(this),this.$scope.isItAKOMatch=this.isItAKOMatch.bind(this),this.$scope["continue"]=this["continue"].bind(this),this.$scope.getImageSrc=this.getImageSrc.bind(this),this.$scope.getCongratulation=this.getCongratulation.bind(this),this.$scope.formatParty=this.formatParty,this.$scope.ok=this.ok.bind(this),this.$scope.ko=this.ko.bind(this),this.$scope.hasStarted=this.hasStarted.bind(this),this.$scope.hasEnded=this.hasEnded.bind(this),this.$scope.shareOnTwitter=this.shareOnTwitter.bind(this),this.$scope.restart=this.restart}return e.$inject=["$log","$scope","$http","$timeout"],s(e,[{key:"isItAMatch",value:function(){return null!=this.$scope.itsamatch}},{key:"isItAOKMatch",value:function(){return this.isItAMatch()&&"."!==this.$scope.itsamatch.title}},{key:"isItAKOMatch",value:function(){return this.isItAMatch()&&!this.isItAOKMatch()}},{key:"match",value:function(e){this.$scope.itsamatch=e}},{key:"continue",value:function(){this.$scope.itsamatch=null}},{key:"getImageSrc",value:function(e){return null==e?"":"assets/images/"+e.name.toLowerCase().replace(/ /g,"-")+".jpg"}},{key:"getCongratulation",value:function(){return _.sample(this.congratulations)}},{key:"formatParty",value:function(e){switch(e){case"LR":return"à Les Républicains";case"PS":return"au Parti socialiste";case"UDE":return"à l'Union des démocrates et des écologistes";case"REM":return"à La République en marche";case"PRG":return"au Parti radical de gauche";case"UDI":return"à l'Union des démocrates et indépendants";case"EELV":return"à Europe Écologie Les Verts";case"MR":return"au Mouvement Radical";default:return"au "+e}}},{key:"removeLastPerson",value:function(e){var t=_.last(this.$scope.persons),n=t.surname+" "+t.name;n+=t.isPartOf?(t.ok?" est bien ":" est en fait ")+t.title+".":t.ok?" ne fait en effet pas partie du gouvernement.":" ne fait pas partie du gouvernement.",this.$scope.ending.push({ok:t.ok,label:n,wikipedia:t.wikipedia,image:this.getImageSrc(t)}),this.$scope.persons=_.dropRight(this.$scope.persons)}},{key:"isLastPartOf",value:function(){return _.last(this.$scope.persons).isPartOf}},{key:"ok",value:function(){var e=this,t=function(){e.done>=0&&(e.isLastPartOf()&&(e.match(_.last(e.$scope.persons)),++e.$scope.score),_.last(e.$scope.persons).ok=e.isLastPartOf(),e.removeLastPerson()),++e.done};this.done>=0?(this.$scope.$broadcast("card-ok",_.last(this.$scope.persons).ID),this.$timeout(t.bind(this),500)):t()}},{key:"ko",value:function(){var e=this,t=function(){e.done>=0&&(e.isLastPartOf()||(e.match(_.last(e.$scope.persons)),++e.$scope.score),_.last(e.$scope.persons).ok=!e.isLastPartOf(),e.removeLastPerson()),++e.done};this.done>=0?(this.$scope.$broadcast("card-ko",_.last(this.$scope.persons).ID),this.$timeout(t.bind(this),500)):t()}},{key:"hasStarted",value:function(){return this.done>=0}},{key:"hasEnded",value:function(){return this.done>=this.$scope.deckSize}},{key:"shareOnTwitter",value:function(){var e="J'ai fait "+this.$scope.score+"/"+this.$scope.deckSize+" au Tinder du Gouvernement ! Tu pense pouvoir me battre ? "+window.location.href+" via @pauljoannon";window.open("https://twitter.com/intent/tweet?original_referer=&text="+encodeURIComponent(e),"","width=575,height=400,menubar=no,toolbar=no")}},{key:"restart",value:function(){window.location.reload()}}]),e}();t.MainController=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){"ngInject";var e={restrict:"E",templateUrl:"app/components/card/card.html",scope:{person:"=person"},controller:o,controllerAs:"CardController",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();t.CardDirective=s;var o=function(){function e(t,s){"ngInject";var i=this;n(this,e),this.move=0,this.$scope=s,this.$scope.label=this.person.surname+" "+this.person.name,this.$scope.getTransform=this.getTransform.bind(this),this.$scope.getPicture=this.getPicture.bind(this),this.$scope.$on("card-ok",function(e,t){i.person.ID===t&&(i.move=1)}),this.$scope.$on("card-ko",function(e,t){i.person.ID===t&&(i.move=-1)})}return e.$inject=["$log","$scope"],i(e,[{key:"getTransform",value:function(){return 0!==this.move?{transform:"translateX("+3e3*this.move+"px)",transition:"transform 500ms ease"}:{}}},{key:"getPicture",value:function(){return{"background-image":"url("+this.$scope.$parent.getImageSrc(this.person)+")"}}}]),e}()}]),angular.module("tinderDuGouvernement").run(["$templateCache",function(e){e.put("app/components/card/card.html",'<div ng-style="getTransform()" class="card"><div ng-style="getPicture()" class="card__picture"></div><div class="card__name">{{ label }}</div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-4d38b53228.js.map
